# Инструкция по настройке SaaS системы

## Шаг 1: Создание супер-администратора

Выполните команду:
```bash
python create_super_admin.py
```

Введите логин и пароль для супер-администратора (владельца SaaS).

## Шаг 2: Вход как супер-администратор

1. Откройте http://127.0.0.1:5000/login
2. Войдите с логином и паролем супер-администратора
3. После входа вы автоматически попадёте на страницу `/schools`

## Шаг 3: Создание школы

1. На странице "Управление школами" нажмите кнопку **"+ Добавить школу"**
2. Заполните форму:
   - **Название школы** (обязательно)
   - **Поддомен** (опционально, для будущей функции)
   - **Логин администратора школы** (обязательно, уникальный)
   - **Пароль администратора школы** (обязательно, минимум 6 символов)
   - **Школа активна** (чекбокс)
   - **Функции** - выберите какие функции доступны для школы
3. Нажмите **"Сохранить"**
4. **ВАЖНО**: Сохраните логин и пароль администратора школы! Они будут показаны только один раз.

## Шаг 4: Передача данных администратору школы

Передайте администратору школы:
- Логин
- Пароль
- URL для входа: http://127.0.0.1:5000/login

## Шаг 5: Вход администратора школы

Администратор школы:
1. Входит с выданным логином/паролем
2. Видит только свою школу
3. Может создавать пользователей, учеников, группы и т.д.
4. Все данные автоматически привязываются к его школе

## Управление школами

### Включение/отключение школы

- На странице `/schools` нажмите кнопку **"Отключить"** или **"Включить"** рядом с нужной школой
- При отключении:
  - Администраторы школы не смогут войти
  - Все данные сохраняются
  - Можно включить обратно в любой момент

### Редактирование школы

- Нажмите **"Редактировать"** рядом с школой
- Можно изменить название, поддомен, статус и функции
- **НЕ МОЖНО** изменить логин/пароль администратора (для этого нужно создать нового пользователя)

## Важные замечания

⚠️ **Изоляция данных**:
- Каждая школа видит ТОЛЬКО свои данные
- Администраторы школ не могут видеть другие школы
- Супер-администратор видит все школы, но не управляет их данными напрямую

⚠️ **Безопасность**:
- Храните логины/пароли администраторов школ в безопасном месте
- Рекомендуется использовать сильные пароли
- При утечке пароля создайте нового администратора и деактивируйте старого

## Структура ролей

- **super_admin** - Владелец SaaS, управляет школами
- **admin** - Администратор школы, управляет только своей школой
- **financier** - Финансист школы
- **teacher** - Преподаватель школы
- **payment_admin** - Администратор платежей

Все роли кроме `super_admin` привязаны к конкретной школе через `school_id`.

