<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ì—Ä–∞—Ñ–∏–∫ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ —Ä–∞–±–æ—Ç (–ì–ü–†) - ProBIM</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/schedule.css">
</head>
<body>
    <div class="app-container">
        <!-- –ë–æ–∫–æ–≤–æ–µ –º–µ–Ω—é -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1>ProBIM</h1>
            </div>
            <nav class="sidebar-nav">
                <a href="index.html" class="nav-item">
                    <span class="icon">üè†</span>
                    <span>–û–±—ä–µ–∫—Ç—ã</span>
                </a>
                <a href="estimate.html" class="nav-item">
                    <span class="icon">üìä</span>
                    <span>–°–º–µ—Ç–∞</span>
                </a>
                <a href="schedule.html" class="nav-item active">
                    <span class="icon">üìÖ</span>
                    <span>–ì–ü–†</span>
                </a>
                <a href="#" class="nav-item">
                    <span class="icon">üì¶</span>
                    <span>–°–Ω–∞–±–∂–µ–Ω–∏–µ</span>
                </a>
                <a href="#" class="nav-item">
                    <span class="icon">üí∞</span>
                    <span>–§–∏–Ω–∞–Ω—Å—ã</span>
                </a>
            </nav>
        </aside>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
        <main class="main-content">
            <div class="content-header">
                <div class="header-left">
                    <h2 id="scheduleTitle">–ì—Ä–∞—Ñ–∏–∫ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ —Ä–∞–±–æ—Ç</h2>
                    <div class="breadcrumbs" id="breadcrumbs">
                        <span class="breadcrumb-item">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
                    </div>
                </div>
                <div class="header-right">
                    <button class="btn btn-secondary" onclick="ScheduleManager.goBack()">
                        ‚Üê –ù–∞–∑–∞–¥
                    </button>
                    <button class="btn btn-primary" onclick="ScheduleManager.createSchedule()">
                        + –°–æ–∑–¥–∞—Ç—å –ì–ü–†
                    </button>
                </div>
            </div>

            <!-- –°–ø–∏—Å–æ–∫ –≥—Ä–∞—Ñ–∏–∫–æ–≤ (–µ—Å–ª–∏ –Ω–µ –≤—ã–±—Ä–∞–Ω –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π) -->
            <div id="scheduleListView" style="display: none;">
                <div class="card">
                    <div class="card-header">
                        <h3>–ì—Ä–∞—Ñ–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ —Ä–∞–±–æ—Ç</h3>
                    </div>
                    <div class="card-body">
                        <div id="scheduleList" class="schedule-list">
                            <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- –î–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –ì–ü–† -->
            <div id="scheduleDetailView" style="display: none;">
                <!-- –í–∫–ª–∞–¥–∫–∏: –¢–∞–±–ª–∏—Ü–∞ | –ì–∞–Ω—Ç | IFC -->
                <div class="view-tabs">
                    <button class="tab-btn active" data-view="table" onclick="ScheduleManager.switchView('table')">
                        üìã –¢–∞–±–ª–∏—Ü–∞
                    </button>
                    <button class="tab-btn" data-view="gantt" onclick="ScheduleManager.switchView('gantt')">
                        üìä –î–∏–∞–≥—Ä–∞–º–º–∞ –ì–∞–Ω—Ç–∞
                    </button>
                    <button class="tab-btn" data-view="ifc" onclick="ScheduleManager.switchView('ifc')">
                        üèóÔ∏è IFC –ú–æ–¥–µ–ª—å
                    </button>
                </div>

                <!-- –¢–∞–±–ª–∏—á–Ω—ã–π –≤–∏–¥ -->
                <div id="tableView" class="view-panel active">
                    <div class="card">
                        <div class="card-header">
                            <h3>–ó–∞–¥–∞—á–∏ –ì–ü–†</h3>
                            <button class="btn btn-primary btn-sm" onclick="ScheduleManager.importFromEstimate()">
                                + –ò–º–ø–æ—Ä—Ç –∏–∑ —Å–º–µ—Ç—ã
                            </button>
                        </div>
                        <div class="card-body">
                            <div class="table-container">
                                <table class="schedule-table">
                                    <thead>
                                        <tr>
                                            <th>–≠—Ç–∞–∂</th>
                                            <th>–í–∏–¥ —Ä–∞–±–æ—Ç</th>
                                            <th>–ï–¥.–∏–∑–º</th>
                                            <th>–û–±—ä—ë–º</th>
                                            <th>–ù–∞—á–∞–ª–æ</th>
                                            <th>–û–∫–æ–Ω—á–∞–Ω–∏–µ</th>
                                            <th>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</th>
                                            <th>–°—Ç–∞—Ç—É—Å</th>
                                            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                                        </tr>
                                    </thead>
                                    <tbody id="tasksTableBody">
                                        <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- –î–∏–∞–≥—Ä–∞–º–º–∞ –ì–∞–Ω—Ç–∞ -->
                <div id="ganttView" class="view-panel">
                    <div class="card">
                        <div class="card-header">
                            <h3>–î–∏–∞–≥—Ä–∞–º–º–∞ –ì–∞–Ω—Ç–∞</h3>
                        </div>
                        <div class="card-body">
                            <div id="ganttChart" class="gantt-container">
                                <div class="gantt-placeholder">
                                    –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∏–∞–≥—Ä–∞–º–º—ã –ì–∞–Ω—Ç–∞...
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- IFC Viewer -->
                <div id="ifcView" class="view-panel">
                    <div class="card">
                        <div class="card-header">
                            <h3>BIM –ú–æ–¥–µ–ª—å</h3>
                            <div class="ifc-controls">
                                <button class="btn btn-secondary btn-sm" onclick="ScheduleManager.resetIFCView()">
                                    üîÑ –°–±—Ä–æ—Å–∏—Ç—å –≤–∏–¥
                                </button>
                                <button class="btn btn-secondary btn-sm" onclick="ScheduleManager.highlightFloor()">
                                    üí° –ü–æ–¥—Å–≤–µ—Ç–∏—Ç—å —ç—Ç–∞–∂
                                </button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div id="ifcContainer" class="ifc-viewer-container">
                                <canvas id="ifcCanvas"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ: –°–æ–∑–¥–∞–Ω–∏–µ –ì–ü–† -->
    <div id="createScheduleModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ì–ü–†</h3>
                <button class="modal-close" onclick="UI.closeModal('createScheduleModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>–í—ã–±–µ—Ä–∏—Ç–µ –±–ª–æ–∫</label>
                    <select id="blockSelect" class="form-control">
                        <option value="">–ó–∞–≥—Ä—É–∑–∫–∞ –±–ª–æ–∫–æ–≤...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>–ù–∞–∑–≤–∞–Ω–∏–µ –ì–ü–†</label>
                    <input type="text" id="scheduleName" class="form-control" placeholder="–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑ –±–ª–æ–∫–∞">
                </div>
                <div class="form-group">
                    <label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
                    <textarea id="scheduleDescription" class="form-control" rows="3"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="UI.closeModal('createScheduleModal')">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn btn-primary" onclick="ScheduleManager.saveSchedule()">–°–æ–∑–¥–∞—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ: –ò–º–ø–æ—Ä—Ç –∏–∑ —Å–º–µ—Ç—ã -->
    <div id="importEstimateModal" class="modal">
        <div class="modal-content modal-lg">
            <div class="modal-header">
                <h3>–ò–º–ø–æ—Ä—Ç –≤–∏–¥–æ–≤ —Ä–∞–±–æ—Ç –∏–∑ —Å–º–µ—Ç—ã</h3>
                <button class="modal-close" onclick="UI.closeModal('importEstimateModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>–í—ã–±–µ—Ä–∏—Ç–µ —Å–º–µ—Ç—ã</label>
                    <div id="estimateCheckboxes" class="checkbox-group">
                        <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è -->
                    </div>
                </div>
                <div class="form-group">
                    <label>–£–∫–∞–∂–∏—Ç–µ —ç—Ç–∞–∂–∏ –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç</label>
                    <div id="floorInputs" class="floor-inputs">
                        <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –∏–∑ –±–ª–æ–∫–∞ -->
                    </div>
                    <button class="btn btn-secondary btn-sm" onclick="ScheduleManager.addFloorInput()">
                        + –î–æ–±–∞–≤–∏—Ç—å —ç—Ç–∞–∂
                    </button>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="UI.closeModal('importEstimateModal')">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn btn-primary" onclick="ScheduleManager.executeImport()">–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
            </div>
        </div>
    </div>

    <script src="js/ui.js"></script>
    <script src="js/schedule.js"></script>
</body>
</html>
