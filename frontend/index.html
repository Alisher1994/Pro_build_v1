<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ProBIM - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã–º–∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏</title>
    <link rel="stylesheet" href="css/style.css">
    <!-- DHTMLX Gantt -->
    <link rel="stylesheet" href="https://cdn.dhtmlx.com/gantt/edge/dhtmlxgantt.css">
    <script src="https://cdn.dhtmlx.com/gantt/edge/dhtmlxgantt.js"></script>
    <script src="https://cdn.dhtmlx.com/gantt/edge/locale/locale_ru.js"></script>
    <!-- Custom overrides must come AFTER the library CSS -->
    <link rel="stylesheet" href="css/gantt-colors.css">
    <!-- Yandex Maps API (–±–µ–∑ API –∫–ª—é—á–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏) -->
    <script src="https://api-maps.yandex.ru/2.1/?apikey=&lang=ru_RU" type="text/javascript"></script>
    <!-- Chart.js for Dashboard -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <style>
        /* Hide scrollbar for content area but allow scrolling */
        .content-area {
            scrollbar-width: none;
        }

        .content-area::-webkit-scrollbar {
            display: none;
        }

        /* Custom modal for block reason */
        #block-reason-modal {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.35);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 16px;
            z-index: 9000;
        }

        #block-reason-modal.hidden {
            display: none;
        }

        .block-reason-dialog {
            background: var(--white);
            border-radius: 4px;
            padding: 24px;
            width: min(460px, 100%);
            box-shadow: var(--shadow-lg);
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .block-reason-dialog h3 {
            margin: 0;
            font-size: 18px;
        }

        .block-reason-dialog textarea {
            width: 100%;
            min-height: 120px;
            resize: vertical;
            border: 1px solid var(--gray-300);
            border-radius: 4px;
            padding: 10px;
            font-family: inherit;
            font-size: 14px;
        }

        .block-reason-actions {
            display: flex;
            justify-content: flex-end;
            gap: 12px;
        }

        .block-reason-note {
            font-size: 12px;
            color: var(--gray-600);
        }

        #block-reason-save {
            background: #207345;
            border-color: #207345;
            color: #fff;
        }

        .block-reason-row td {
            padding: 10px;
            border-top: none;
        }

        .block-reason-row .block-reason-banner {
            margin: 0;
            padding: 12px;
        }

        .table thead th {
            background: #DEF2F1;
            color: var(--gray-800);
        }
    </style>
</head>

<body>
    <!-- Sidebar —Å –ø—Ä–æ–µ–∫—Ç–∞–º–∏ -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="sidebar-brand">
                <span>PROBIM</span>
            </div>
            <div class="sidebar-actions">
                <button id="add-project" class="add-btn" title="–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–µ–∫—Ç">+</button>
                <button class="sidebar-toggle" id="sidebar-collapse-toggle" aria-expanded="true"
                    aria-label="–°–≤–µ—Ä–Ω—É—Ç—å —Å–ø–∏—Å–æ–∫ –æ–±—ä–µ–∫—Ç–æ–≤" title="–°–≤–µ—Ä–Ω—É—Ç—å —Å–ø–∏—Å–æ–∫ –æ–±—ä–µ–∫—Ç–æ–≤">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="15 5 9 12 15 19"></polyline>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="project-list" class="project-list"></ul>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Title Bar (Quick Access Toolbar) -->
        <div class="office-title-bar">
            <div class="title-bar-left">
                <button class="qat-btn" onclick="app.goBack()" title="–ù–∞–∑–∞–¥">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 12H5M12 19l-7-7 7-7" />
                    </svg>
                </button>
                <button class="qat-btn" onclick="window.location.reload()" title="–û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2" />
                    </svg>
                </button>
                <div class="qat-separator"></div>
                <button class="qat-btn" title="–°–æ—Ö—Ä–∞–Ω–∏—Ç—å">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z" />
                        <polyline points="17 21 17 13 7 13 7 21" />
                        <polyline points="7 3 7 8 15 8" />
                    </svg>
                </button>
                <button class="qat-btn" title="–û—Ç–º–µ–Ω–∏—Ç—å">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 7v6h6" />
                        <path d="M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13" />
                    </svg>
                </button>
                <button class="qat-btn" title="–ü–µ—á–∞—Ç—å">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="6 9 6 2 18 2 18 9" />
                        <path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2" />
                        <rect x="6" y="14" width="12" height="8" />
                    </svg>
                </button>
            </div>
            <div class="title-bar-right">
                <div class="search-box">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8" />
                        <path d="m21 21-4.35-4.35" />
                    </svg>
                    <input id="global-search" type="search" placeholder="–ü–æ–∏—Å–∫..." />
                </div>

                <!-- Weather Widget -->
                <div class="weather-widget" id="weather-widget">
                    <div class="weather-icon">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M12 2v2" />
                            <path d="m4.93 4.93 1.41 1.41" />
                            <path d="M20 12h2" />
                            <path d="m19.07 4.93-1.41 1.41" />
                            <path d="M15.947 12.65a4 4 0 0 0-5.925-4.128" />
                            <path d="M13 22H7a5 5 0 1 1 4.9-6H13a3 3 0 0 1 0 6Z" />
                        </svg>
                    </div>
                    <div class="weather-info">
                        <span class="weather-temp">+26¬∞C</span>
                        <span class="weather-city">–¢–∞—à–∫–µ–Ω—Ç</span>
                    </div>
                </div>

                <!-- AQI Widget -->
                <div class="aqi-widget" id="aqi-widget" title="–ö–∞—á–µ—Å—Ç–≤–æ –≤–æ–∑–¥—É—Ö–∞">
                    <div class="aqi-indicator" id="aqi-indicator"></div>
                    <div class="aqi-info">
                        <div class="aqi-main">
                            <span class="aqi-label">AQI</span>
                            <span class="aqi-value" id="aqi-value">--</span>
                        </div>
                        <div class="aqi-sub">
                            <span id="pm-value">--</span><span class="aqi-unit">¬µg/m¬≥</span>
                        </div>
                    </div>
                </div>
                <div class="account-switcher" role="button" tabindex="0" aria-label="–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞">
                    <div class="account-icon" aria-hidden="true">
                        <img src="https://i.pravatar.cc/150?img=11" alt="User"
                            style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%;">
                    </div>
                    <div class="account-info">
                        <span class="account-company" id="header-company-name">–û–û–û ¬´PROBIM¬ª</span>
                        <span class="account-user">–ê–ª–∏—à–µ—Ä –°–∞–¥—ã–∫–æ–≤</span>
                    </div>
                    <span class="account-caret" aria-hidden="true">‚ñæ</span>
                </div>
                <button class="qat-btn notification-btn" title="–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9" />
                        <path d="M13.73 21a2 2 0 0 1-3.46 0" />
                    </svg>
                    <span class="notification-badge">3</span>
                </button>
                <button class="qat-btn" id="header-chat-toggle" title="–ß–∞—Ç">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path
                            d="M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719" />
                        <path d="M8 12h.01" />
                        <path d="M12 12h.01" />
                        <path d="M16 12h.01" />
                    </svg>
                </button>
            </div>
        </div>

        <!-- Ribbon Tabs -->
        <div class="office-ribbon" id="office-ribbon">
            <div class="ribbon-tabs-bar">
                <div class="ribbon-tabs">
                    <button class="ribbon-tab active" data-ribbon="dashboard">–î–∞—à–±–æ—Ä–¥</button>
                    <button class="ribbon-tab" data-ribbon="estimate">–°–º–µ—Ç–∞</button>
                    <button class="ribbon-tab" data-ribbon="tender">–¢–µ–Ω–¥–µ—Ä</button>
                    <button class="ribbon-tab" data-ribbon="schedule">–ì—Ä–∞—Ñ–∏–∫</button>
                    <button class="ribbon-tab" data-ribbon="supply">–°–Ω–∞–±–∂–µ–Ω–∏–µ</button>
                    <button class="ribbon-tab" data-ribbon="finance">–§–∏–Ω–∞–Ω—Å—ã</button>
                    <button class="ribbon-tab" data-ribbon="otitb">–û–¢–∏–¢–ë</button>
                    <button class="ribbon-tab" data-ribbon="settings">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
                </div>
                <button class="ribbon-toggle" id="ribbon-collapse-toggle" aria-expanded="true"
                    aria-label="–°–≤–µ—Ä–Ω—É—Ç—å –ª–µ–Ω—Ç—É" title="–°–≤–µ—Ä–Ω—É—Ç—å –ª–µ–Ω—Ç—É">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="6 14 12 8 18 14" />
                    </svg>
                </button>
            </div>

            <!-- Ribbon Content -->
            <div class="ribbon-content">
                <!-- Dashboard Ribbon Panel -->
                <div class="ribbon-panel active" data-panel="dashboard">
                    <div class="ribbon-group">
                        <div class="ribbon-group-content">
                            <button class="ribbon-btn large" id="btn-stats-tab">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <line x1="18" y1="20" x2="18" y2="10" />
                                    <line x1="12" y1="20" x2="12" y2="4" />
                                    <line x1="6" y1="20" x2="6" y2="14" />
                                </svg>
                                <span>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</span>
                            </button>
                            <button class="ribbon-btn large" id="btn-structure-tab">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                                    stroke-linejoin="round" class="lucide lucide-users-round-icon lucide-users-round">
                                    <path d="M18 21a8 8 0 0 0-16 0" />
                                    <circle cx="10" cy="8" r="5" />
                                    <path d="M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3" />
                                </svg>
                                <span>–°—Ç—Ä—É–∫—Ç—É—Ä–∞</span>
                            </button>
                            <button class="ribbon-btn large" id="btn-cameras-tab">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                                    stroke-linejoin="round" class="lucide lucide-cctv-icon lucide-cctv">
                                    <path
                                        d="M16.75 12h3.632a1 1 0 0 1 .894 1.447l-2.034 4.069a1 1 0 0 1-1.708.134l-2.124-2.97" />
                                    <path
                                        d="M17.106 9.053a1 1 0 0 1 .447 1.341l-3.106 6.211a1 1 0 0 1-1.342.447L3.61 12.3a2.92 2.92 0 0 1-1.3-3.91L3.69 5.6a2.92 2.92 0 0 1 3.92-1.3z" />
                                    <path d="M2 19h3.76a2 2 0 0 0 1.8-1.1L9 15" />
                                    <path d="M2 21v-4" />
                                    <path d="M7 9h.01" />
                                </svg>
                                <span>–ö–∞–º–µ—Ä—ã</span>
                            </button>
                        </div>
                        <span class="ribbon-group-label">–î–∞—à–±–æ—Ä–¥</span>
                    </div>
                    <div class="ribbon-separator"></div>
                    <div class="ribbon-group">
                        <div class="ribbon-group-content">
                            <button class="ribbon-btn large">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <line x1="18" y1="20" x2="18" y2="10" />
                                    <line x1="12" y1="20" x2="12" y2="4" />
                                    <line x1="6" y1="20" x2="6" y2="14" />
                                </svg>
                                <span>–û—Ç—á–µ—Ç—ã</span>
                            </button>
                        </div>
                        <span class="ribbon-group-label">–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</span>
                    </div>
                </div>

                <!-- Estimate Ribbon Panel -->
                <div class="ribbon-panel" data-panel="estimate">
                    <div class="ribbon-group" id="ribbon-group-add-block">
                        <div class="ribbon-group-content">
                            <button id="add-block-btn" class="ribbon-btn large">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path d="M12 5v14" />
                                    <path d="M5 12h14" />
                                </svg>
                                <span>–î–æ–±–∞–≤–∏—Ç—å<br>–±–ª–æ–∫</span>
                            </button>
                        </div>
                        <span class="ribbon-group-label">–ë–ª–æ–∫–∏</span>
                    </div>
                    <div class="ribbon-separator" id="ribbon-separator-after-blocks"></div>
                    <div class="ribbon-group" id="ribbon-group-add-estimate">
                        <div class="ribbon-group-content">
                            <button id="add-section-btn" class="ribbon-btn large">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <rect x="3" y="3" width="7" height="7" />
                                    <rect x="14" y="3" width="7" height="7" />
                                    <rect x="14" y="14" width="7" height="7" />
                                    <rect x="3" y="14" width="7" height="7" />
                                </svg>
                                <span>–î–æ–±–∞–≤–∏—Ç—å<br>—Å–º–µ—Ç—É</span>
                            </button>
                        </div>
                        <span class="ribbon-group-label">–°–º–µ—Ç—ã</span>
                    </div>
                    <div class="ribbon-separator" id="ribbon-separator-after-estimates"></div>
                    <div class="ribbon-group" id="ribbon-group-import">
                        <div class="ribbon-group-content row">
                            <button id="import-estimate-btn" class="ribbon-btn" title="–ò–º–ø–æ—Ä—Ç XML/Excel">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                                    <polyline points="7 10 12 15 17 10" />
                                    <line x1="12" y1="15" x2="12" y2="3" />
                                </svg>
                                <span>–ò–º–ø–æ—Ä—Ç</span>
                            </button>
                            <button id="upload-ifc-btn" class="ribbon-btn" title="–ó–∞–≥—Ä—É–∑–∏—Ç—å IFC">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                                    <polyline points="17 8 12 3 7 8" />
                                    <line x1="12" y1="3" x2="12" y2="15" />
                                </svg>
                                <span>IFC</span>
                            </button>
                        </div>
                        <span class="ribbon-group-label">–ò–º–ø–æ—Ä—Ç</span>
                    </div>
                    <div class="ribbon-separator" id="ribbon-separator-after-import"></div>
                    <div class="ribbon-group" id="ribbon-group-view-tools">
                        <div class="ribbon-group-content row">
                            <button id="expand-all-btn" class="ribbon-btn">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <polyline points="6 9 12 15 18 9" />
                                </svg>
                                <span>–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å<br>–≤—Å—ë</span>
                            </button>
                            <button id="collapse-all-btn" class="ribbon-btn">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <polyline points="18 15 12 9 6 15" />
                                </svg>
                                <span>–°–≤–µ—Ä–Ω—É—Ç—å<br>–≤—Å—ë</span>
                            </button>
                            <button id="expand-worktypes-btn" class="ribbon-btn" title="–†–∞—Å–∫—Ä—ã—Ç—å –¥–æ –≤–∏–¥–æ–≤ —Ä–∞–±–æ—Ç">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <polyline points="6 9 12 15 18 9" />
                                    <line x1="12" y1="5" x2="12" y2="19" />
                                </svg>
                                <span>–í–∏–¥<br>—Ä–∞–±–æ—Ç—ã</span>
                            </button>
                        </div>
                        <span class="ribbon-group-label">–í–∏–¥</span>
                    </div>
                    <div class="ribbon-separator" id="ribbon-separator-after-view"></div>
                    <div class="ribbon-group" id="ribbon-group-stage-actions">
                        <div class="ribbon-group-content">
                            <button id="add-stage-btn" class="ribbon-btn large">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path d="M12 5v14" />
                                    <path d="M5 12h14" />
                                </svg>
                                <span>–î–æ–±–∞–≤–∏—Ç—å<br>—ç—Ç–∞–ø</span>
                            </button>
                        </div>
                        <span class="ribbon-group-label">–≠—Ç–∞–ø—ã</span>
                    </div>
                    <div class="ribbon-separator" id="ribbon-separator-after-stage"></div>
                    <div class="ribbon-group" id="ribbon-group-resource-filters">
                        <div class="ribbon-group-content row">
                            <button id="btn-filter-linked" class="ribbon-btn" title="–ü–æ–∫–∞–∑–∞—Ç—å —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" />
                                    <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" />
                                </svg>
                                <span>–°–≤—è–∑–∞–Ω–Ω—ã–µ</span>
                            </button>
                            <button id="btn-filter-unlinked" class="ribbon-btn" title="–ü–æ–∫–∞–∑–∞—Ç—å –Ω–µ—Å–≤—è–∑–∞–Ω–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path
                                        d="m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71" />
                                    <path
                                        d="m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71" />
                                    <line x1="8" x2="8" y1="2" y2="5" />
                                    <line x1="2" x2="5" y1="8" y2="8" />
                                </svg>
                                <span>–ù–µ—Å–≤—è–∑–∞–Ω–Ω—ã–µ</span>
                            </button>
                            <button id="btn-filter-reset" class="ribbon-btn" title="–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ —Ä–µ—Å—É—Ä—Å—ã">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <circle cx="12" cy="12" r="10" />
                                    <line x1="4.93" y1="4.93" x2="19.07" y2="19.07" />
                                </svg>
                                <span>–í—Å–µ</span>
                            </button>
                        </div>
                        <span class="ribbon-group-label">–†–µ—Å—É—Ä—Å—ã</span>
                    </div>
                    <div class="ribbon-separator" id="ribbon-separator-after-resources"></div>
                    <div class="ribbon-group" id="ribbon-group-viewer-modes">
                        <div class="ribbon-group-content row">
                            <button class="ribbon-btn viewer-mode-btn" data-viewer-mode="textured"
                                title="–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç—É—Ä">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <rect x="4" y="4" width="16" height="16" rx="2" />
                                    <line x1="4" y1="12" x2="20" y2="12" />
                                    <line x1="12" y1="4" x2="12" y2="20" />
                                </svg>
                                <span>–¢–µ–∫—Å—Ç—É—Ä—ã</span>
                            </button>
                            <button class="ribbon-btn viewer-mode-btn" data-viewer-mode="monochrome"
                                title="–ú–æ–Ω–æ—Ö—Ä–æ–º–Ω—ã–π —Ä–µ–∂–∏–º">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <circle cx="12" cy="12" r="8" />
                                    <line x1="12" y1="4" x2="12" y2="20" />
                                </svg>
                                <span>–ú–æ–Ω–æ</span>
                            </button>
                            <button class="ribbon-btn viewer-mode-btn" data-viewer-mode="transparent"
                                title="–ü—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ä–µ–∂–∏–º">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <rect x="4" y="4" width="16" height="16" rx="2" />
                                    <line x1="4" y1="4" x2="20" y2="20" />
                                </svg>
                                <span>–ü—Ä–æ–∑—Ä–∞—á–Ω—ã–π</span>
                            </button>
                            <button id="isolate-btn" class="ribbon-btn" title="–ò–∑–æ–ª–∏—Ä–æ–≤–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã" disabled>
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path d="M3 3h18v18H3z" />
                                    <path d="M9 9l6 6" />
                                </svg>
                                <span>–ò–∑–æ–ª–∏—Ä–æ–≤–∞—Ç—å</span>
                            </button>
                            <button id="unisolate-btn" class="ribbon-btn" title="–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã" disabled>
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <circle cx="12" cy="12" r="9" />
                                    <line x1="8" y1="12" x2="16" y2="12" />
                                </svg>
                                <span>–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å—ë</span>
                            </button>
                        </div>
                        <span class="ribbon-group-label">3D —Ä–µ–∂–∏–º</span>
                    </div>
                </div>

                <!-- Tender Ribbon Panel -->
                <div class="ribbon-panel" data-panel="tender">
                    <div class="ribbon-group">
                        <div class="ribbon-group-content">
                            <button class="ribbon-btn large"
                                onclick="const tenderFrame = document.getElementById('tender-frame'); if(tenderFrame && tenderFrame.contentWindow.createNewLot) tenderFrame.contentWindow.createNewLot();">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path d="M12 5v14" />
                                    <path d="M5 12h14" />
                                </svg>
                                <span>–î–æ–±–∞–≤–∏—Ç—å<br>–ª–æ—Ç</span>
                            </button>
                        </div>
                        <span class="ribbon-group-label">–î–æ–±–∞–≤–ª–µ–Ω–∏–µ</span>
                    </div>
                    <div class="ribbon-separator"></div>
                    <div class="ribbon-group">
                        <div class="ribbon-group-content">
                            <button class="ribbon-btn large"
                                onclick="const refreshFrame = document.getElementById('tender-frame'); if(refreshFrame && refreshFrame.contentWindow.refreshMockData) refreshFrame.contentWindow.refreshMockData(); else if(refreshFrame) refreshFrame.contentWindow.location.reload();">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path
                                        d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2" />
                                </svg>
                                <span>–û–±–Ω–æ–≤–∏—Ç—å</span>
                            </button>
                        </div>
                        <span class="ribbon-group-label">–î–µ–π—Å—Ç–≤–∏—è</span>
                    </div>
                </div>

                <!-- Schedule Ribbon Panel -->
                <div class="ribbon-panel" data-panel="schedule">
                    <div class="ribbon-group">
                        <div class="ribbon-group-content">
                            <button id="generate-schedule-btn" class="ribbon-btn large">
                                <span style="font-size: 24px;">ü™Ñ</span>
                                <span>–ú–∞—Å—Ç–µ—Ä<br>–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏</span>
                            </button>
                        </div>
                        <span class="ribbon-group-label">–°–æ–∑–¥–∞–Ω–∏–µ</span>
                    </div>
                    <div class="ribbon-separator"></div>
                    <div class="ribbon-group">
                        <div class="ribbon-group-content">
                            <button id="assign-work-wizard-btn" class="ribbon-btn large">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path d="M9 18h6" />
                                    <path d="M10 22h4" />
                                    <path d="M12 2v6" />
                                    <path d="M7 8h10" />
                                    <path d="M6 8v8a6 6 0 0 0 12 0V8" />
                                </svg>
                                <span>–†–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å<br>—Ä–∞–±–æ—Ç—ã</span>
                            </button>
                        </div>
                        <span class="ribbon-group-label">–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ</span>
                    </div>
                    <div class="ribbon-separator"></div>
                    <div class="ribbon-group">
                        <div class="ribbon-group-content">
                            <button id="clear-schedule-btn" class="ribbon-btn large">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <polyline points="3 6 5 6 21 6"></polyline>
                                    <path
                                        d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2">
                                    </path>
                                    <line x1="10" y1="11" x2="10" y2="17"></line>
                                    <line x1="14" y1="11" x2="14" y2="17"></line>
                                </svg>
                                <span>–û—á–∏—Å—Ç–∏—Ç—å<br>–ì–ü–†</span>
                            </button>
                        </div>
                        <span class="ribbon-group-label">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</span>
                    </div>
                    <div class="ribbon-separator"></div>
                    <div class="ribbon-group">
                        <div class="ribbon-group-content">
                            <button id="export-schedule-btn" class="ribbon-btn large">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                    <polyline points="14 2 14 8 20 8"></polyline>
                                    <line x1="16" y1="13" x2="8" y2="13"></line>
                                    <line x1="16" y1="17" x2="8" y2="17"></line>
                                    <polyline points="10 9 9 9 8 9"></polyline>
                                </svg>
                                <span>–≠–∫—Å–ø–æ—Ä—Ç<br>–≤ PDF</span>
                            </button>
                        </div>
                        <span class="ribbon-group-label">–≠–∫—Å–ø–æ—Ä—Ç</span>
                    </div>

                    <div class="ribbon-separator"></div>
                    <div class="ribbon-group">
                        <div class="ribbon-group-content">
                            <button id="norms-settings-btn" class="ribbon-btn large">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path d="M12 2L2 7l10 5 10-5-10-5z" />
                                    <path d="M2 17l10 5 10-5M2 12l10 5 10-5" />
                                </svg>
                                <span>–ù–æ—Ä–º–∞—Ç–∏–≤–Ω–∞—è<br>–±–∞–∑–∞</span>
                            </button>
                        </div>
                        <span class="ribbon-group-label">–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏</span>
                    </div>

                    <div class="ribbon-separator"></div>
                    <div class="ribbon-group" id="ribbon-group-schedule-view-tools">
                        <div class="ribbon-group-content row">
                            <button id="schedule-expand-all-btn" class="ribbon-btn">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <polyline points="6 9 12 15 18 9" />
                                </svg>
                                <span>–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å<br>–≤—Å—ë</span>
                            </button>
                            <button id="schedule-collapse-all-btn" class="ribbon-btn">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <polyline points="18 15 12 9 6 15" />
                                </svg>
                                <span>–°–≤–µ—Ä–Ω—É—Ç—å<br>–≤—Å—ë</span>
                            </button>
                        </div>
                        <span class="ribbon-group-label">–í–∏–¥</span>
                    </div>
                </div>

                <!-- Supply Ribbon Panel -->
                <div class="ribbon-panel" data-panel="supply">
                    <div class="ribbon-group">
                        <div class="ribbon-group-content">
                            <button id="add-supply-btn" class="ribbon-btn large">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path
                                        d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z" />
                                </svg>
                                <span>–ü–ª–∞–Ω<br>—Å–Ω–∞–±–∂–µ–Ω–∏—è</span>
                            </button>
                        </div>
                        <span class="ribbon-group-label">–°–Ω–∞–±–∂–µ–Ω–∏–µ</span>
                    </div>
                </div>

                <!-- Finance Ribbon Panel -->
                <div class="ribbon-panel" data-panel="finance">
                    <div class="ribbon-group">
                        <div class="ribbon-group-content row">
                            <button id="add-income-btn" class="ribbon-btn">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <line x1="12" y1="19" x2="12" y2="5" />
                                    <polyline points="5 12 12 5 19 12" />
                                </svg>
                                <span>–ü—Ä–∏—Ö–æ–¥</span>
                            </button>
                            <button id="add-expense-btn" class="ribbon-btn">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <line x1="12" y1="5" x2="12" y2="19" />
                                    <polyline points="19 12 12 19 5 12" />
                                </svg>
                                <span>–†–∞—Å—Ö–æ–¥</span>
                            </button>
                        </div>
                        <span class="ribbon-group-label">–û–ø–µ—Ä–∞—Ü–∏–∏</span>
                    </div>
                </div>


                <!-- Settings Ribbon Panel -->
                <div class="ribbon-panel" data-panel="settings">
                    <div class="ribbon-group">
                        <div class="ribbon-group-content">
                            <button id="project-settings-btn" class="ribbon-btn large">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                    fill="none" stroke="#207345" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <path d="M11 10.27 7 3.34" />
                                    <path d="m11 13.73-4 6.93" />
                                    <path d="M12 22v-2" />
                                    <path d="M12 2v2" />
                                    <path d="M14 12h8" />
                                    <path d="m17 20.66-1-1.73" />
                                    <path d="m17 3.34-1 1.73" />
                                    <path d="M2 12h2" />
                                    <path d="m20.66 17-1.73-1" />
                                    <path d="m20.66 7-1.73 1" />
                                    <path d="m3.34 17 1.73-1" />
                                    <path d="m3.34 7 1.73 1" />
                                    <circle cx="12" cy="12" r="2" />
                                    <circle cx="12" cy="12" r="8" />
                                </svg>
                                <span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏<br>–ø—Ä–æ–µ–∫—Ç–∞</span>
                            </button>
                        </div>
                        <span class="ribbon-group-label">–ü—Ä–æ–µ–∫—Ç</span>
                    </div>
                    <div class="ribbon-separator"></div>
                    <div class="ribbon-group">
                        <div class="ribbon-group-content">
                            <button id="subcontractors-btn" class="ribbon-btn large">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M17 21v-2a4 4 0 0 0-4-4H7a4 4 0 0 0-4 4v2" />
                                    <circle cx="9" cy="7" r="4" />
                                    <path d="M23 21v-2a4 4 0 0 0-3-3.87" />
                                    <path d="M16 3.13a4 4 0 0 1 0 7.75" />
                                </svg>
                                <span>–°—É–±–ø–æ–¥—Ä—è–¥</span>
                            </button>
                        </div>
                        <span class="ribbon-group-label">–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—ã</span>
                    </div>
                </div>

                <!-- OT –∏ –¢–ë Ribbon Panel -->
                <div class="ribbon-panel" data-panel="otitb">
                    <div class="ribbon-group">
                        <div class="ribbon-group-content">
                            <button id="tolerance-settings-btn" class="ribbon-btn large">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" />
                                    <path d="M9 12l2 2 4-4" />
                                </svg>
                                <span>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏</span>
                            </button>
                        </div>
                        <span class="ribbon-group-label">–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏</span>
                    </div>
                    <div class="ribbon-separator"></div>
                    <div class="ribbon-group">
                        <div class="ribbon-group-content">
                            <button id="worktypes-settings-btn" class="ribbon-btn large">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                                    <polyline points="14 2 14 8 20 8" />
                                    <line x1="16" y1="13" x2="8" y2="13" />
                                    <line x1="16" y1="17" x2="8" y2="17" />
                                    <polyline points="10 9 9 9 8 9" />
                                </svg>
                                <span>–í–∏–¥—ã<br>—Ä–∞–±–æ—Ç</span>
                            </button>
                        </div>
                        <span class="ribbon-group-label">–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏</span>
                    </div>
                    <div class="ribbon-separator"></div>
                    <div class="ribbon-group">
                        <div class="ribbon-group-content">
                            <button id="permit-board-btn" class="ribbon-btn large">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <rect x="3" y="4" width="18" height="16" rx="2" ry="2" />
                                    <path d="M8 9h8M8 13h5" />
                                    <circle cx="9" cy="17" r="1.2" />
                                </svg>
                                <span>–ù–∞—Ä—è–¥-<br>–¥–æ–ø—É—Å–∫</span>
                            </button>
                        </div>
                        <span class="ribbon-group-label">–ù–∞—Ä—è–¥-–¥–æ–ø—É—Å–∫</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Content Area -->
        <div id="content-area" class="content-area">
            <div id="welcome-screen" class="welcome-screen">
                <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                    <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" />
                    <polyline points="9 22 9 12 15 12 15 22" />
                </svg>
                <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ ProBIM</h2>
                <p>–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç –∏–∑ —Å–ø–∏—Å–∫–∞ —Å–ª–µ–≤–∞ –∏–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–π</p>
                <button id="create-first-project" class="primary-btn">–î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–≤—ã–π –ø—Ä–æ–µ–∫—Ç</button>
            </div>
        </div>
    </div>

    <!-- Chat Sidebar -->
    <div id="chat-sidebar" class="chat-sidebar position-right collapsed">
        <!-- Sidebar Header (Controls & Search) -->
        <!-- Sidebar Header (Controls & Search) -->
        <div class="chat-sidebar-header">
            <div class="chat-header-title-row">
                <span class="chat-header-title">–°–æ–æ–±—â–µ–Ω–∏—è</span>
            </div>
            <div class="chat-controls-row">
                <div class="chat-search-wrapper">
                    <input type="text" id="chat-search-input" placeholder="–ü–æ–∏—Å–∫...">
                    <svg class="search-icon" width="16" height="16" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8"></circle>
                        <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                    </svg>
                </div>
            </div>
        </div>

        <!-- Sidebar Tabs -->
        <div class="chat-sidebar-tabs">
            <button class="chat-tab-btn active" data-tab="contacts" title="–ö–æ–Ω—Ç–∞–∫—Ç—ã">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2" />
                    <circle cx="12" cy="7" r="4" />
                </svg>
                <span>–ö–æ–Ω—Ç–∞–∫—Ç—ã</span>
            </button>
            <button class="chat-tab-btn" data-tab="groups" title="–ì—Ä—É–ø–ø—ã">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" />
                    <circle cx="9" cy="7" r="4" />
                    <path d="M23 21v-2a4 4 0 0 0-3-3.87" />
                    <path d="M16 3.13a4 4 0 0 1 0 7.75" />
                </svg>
                <span>–ì—Ä—É–ø–ø—ã</span>
            </button>
            <button class="chat-tab-btn" data-tab="channel" title="–ö–∞–Ω–∞–ª">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z" />
                    <circle cx="12" cy="12" r="3" />
                </svg>
                <span>–ö–∞–Ω–∞–ª</span>
            </button>
            <button class="chat-tab-btn" data-tab="subcontractors" title="–°—É–±–ø–æ–¥—Ä—è–¥—á–∏–∫–∏">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect width="18" height="18" x="3" y="4" rx="2" ry="2" />
                    <line x1="16" x2="16" y1="2" y2="6" />
                    <line x1="8" x2="8" y1="2" y2="6" />
                    <line x1="3" x2="21" y1="10" y2="10" />
                </svg>
                <span>–°—É–±.</span>
            </button>
        </div>

        <!-- List View -->
        <div id="chat-list-view" class="chat-view active">
            <div id="chat-list-container" class="chat-list-items"></div>
        </div>

        <!-- Conversation View -->
        <div id="chat-conversation-view" class="chat-view" style="display:none;">
            <div class="chat-conversation-header">
                <button id="chat-back-btn" class="chat-back-btn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="m15 18-6-6 6-6" />
                    </svg>
                </button>
                <img id="conversation-user-image" src="" class="chat-avatar"
                    style="width:32px;height:32px;margin-right:8px; display:none;">
                <div class="chat-conversation-info">
                    <span id="converastion-user-name" class="name">Name</span>
                    <span id="conversation-user-status" class="status">Online</span>
                </div>
            </div>

            <div id="chat-messages-area" class="chat-messages-area">
                <!-- Messages will be injected here -->
            </div>

            <div class="chat-input-area">
                <button id="chat-btn-attach" class="chat-media-btn" title="–ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å —Ñ–∞–π–ª">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path
                            d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48" />
                    </svg>
                </button>
                <button id="chat-btn-emoji" class="chat-media-btn" title="–°–º–∞–π–ª—ã">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10" />
                        <path d="M8 14s1.5 2 4 2 4-2 4-2" />
                        <line x1="9" x2="9.01" y1="9" y2="9" />
                        <line x1="15" x2="15.01" y1="9" y2="9" />
                    </svg>
                </button>
                <input type="text" id="chat-message-input" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ...">
                <button id="chat-btn-voice" class="chat-media-btn" title="–ì–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z" />
                        <path d="M19 10v2a7 7 0 0 1-14 0v-2" />
                        <line x1="12" x2="12" y1="19" y2="22" />
                    </svg>
                </button>
                <button id="chat-btn-video" class="chat-media-btn" title="–í–∏–¥–µ–æ—Å–æ–æ–±—â–µ–Ω–∏–µ">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M23 7l-7 5 7 5V7z" />
                        <rect x="1" y="5" width="15" height="14" rx="2" ry="2" />
                    </svg>
                </button>
            </div>
        </div>

        <!-- Sidebar Footer (Bottom Controls) -->
        <div class="chat-sidebar-footer">
            <button id="chat-swap-btn" class="chat-control-btn" title="–ü–æ–º–µ–Ω—è—Ç—å —Å—Ç–æ—Ä–æ–Ω—É">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round">
                    <path d="M8 3 4 7l4 4" />
                    <path d="M4 7h16" />
                    <path d="m16 21 4-4-4-4" />
                    <path d="M20 17H4" />
                </svg>
            </button>
        </div>
    </div>

    <!-- Modals –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
    <div id="modal-container"></div>
    <div id="block-reason-modal" class="hidden" role="dialog" aria-modal="true">
        <div class="block-reason-dialog">
            <h3>–ü—Ä–∏—á–∏–Ω–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏</h3>
            <p class="block-reason-note">–û–ø–∏—à–∏—Ç–µ, –ø–æ—á–µ–º—É —Å—É–±–ø–æ–¥—Ä—è–¥—á–∏–∫ –Ω–µ –º–æ–∂–µ—Ç —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å ‚Äî —Ç–µ–∫—Å—Ç –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂—ë–Ω
                –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∏–∂–µ.</p>
            <textarea id="block-reason-input" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É"></textarea>
            <div class="block-reason-actions">
                <button class="btn secondary" id="block-reason-cancel">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn" id="block-reason-save">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </div>
        </div>
    </div>
    <script>
        (function () {
            const modal = document.getElementById('block-reason-modal');
            const input = document.getElementById('block-reason-input');
            const cancelBtn = document.getElementById('block-reason-cancel');
            const saveBtn = document.getElementById('block-reason-save');
            let resolver = null;

            const closeModal = (result = null) => {
                modal.classList.add('hidden');
                if (resolver) {
                    resolver(result);
                    resolver = null;
                }
            };

            cancelBtn.addEventListener('click', () => closeModal(null));
            saveBtn.addEventListener('click', () => {
                const value = input.value.trim();
                if (!value) {
                    input.focus();
                    return;
                }
                closeModal(value);
            });

            modal.addEventListener('click', (event) => {
                if (event.target === modal) {
                    closeModal(null);
                }
            });

            window.requestBlockReason = () => {
                return new Promise(resolve => {
                    resolver = resolve;
                    input.value = '';
                    modal.classList.remove('hidden');
                    setTimeout(() => input.focus(), 10);
                });
            };
        })();
    </script>

    <!-- XLSX Library for Excel/CSV parsing -->
    <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js"></script>

    <!-- xeokit SDK - –ø–æ–¥–∫–ª—é—á–∞–µ–º –∫–∞–∫ ES-–º–æ–¥—É–ª—å –∏ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º –≤ window.xeokit -->
    <script type="module" src="js/xeokit-loader.js"></script>

    <script src="js/api.js?v=20251219-2" defer></script>
    <script src="js/ui.js" defer></script>
    <script src="js/ifcViewer.js" defer></script>
    <script src="js/import.js" defer></script>
    <script src="js/schedule.js?v=20251219-2" defer></script>
    <script src="js/estimate.js" defer></script>
    <script src="js/chat.js" defer></script>
    <script src="js/settings.js" defer></script>
    <script src="js/norms.js" defer></script>
    <script src="js/normsSettings.js" defer></script>
    <script src="js/workTypeGroups.js?v=20251222-6" defer></script>
    <script src="js/instructionsManager.js?v=20251222-9" defer></script>
    <script src="js/app.js" defer></script>

</body>

</html>