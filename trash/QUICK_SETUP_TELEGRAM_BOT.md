# ü§ñ –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram –±–æ—Ç–æ–≤ (Multi-Tenancy)

## ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:

1. **–°–æ–∑–¥–∞–Ω –º–µ–Ω–µ–¥–∂–µ—Ä –±–æ—Ç–æ–≤** (`telegram_bot_manager.py`) - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–π –±–æ—Ç –¥–ª—è –∫–∞–∂–¥–æ–π —à–∫–æ–ª—ã
2. **–û–±–Ω–æ–≤–ª—ë–Ω API** (`/api/telegram/register`) - —Ç–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç `school_id`
3. **–û–±–Ω–æ–≤–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏** –≤ `telegram_service.py` - —Ä–∞–±–æ—Ç–∞—é—Ç —Å multi-tenancy
4. **–°–æ–∑–¥–∞–Ω systemd service** (`telegram_bot.service`) - –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞

## üì§ –§–∞–π–ª—ã –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä:

1. `telegram_bot_manager.py` ‚Üí `/opt/football_school/telegram_bot_manager.py`
2. `telegram_bot.service` ‚Üí `/opt/football_school/telegram_bot.service`
3. –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
   - `app.py` (–æ–±–Ω–æ–≤–ª—ë–Ω API `/api/telegram/register`)
   - `backend/services/telegram_service.py` (–æ–±–Ω–æ–≤–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏)

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
cd /opt/football_school

# 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ python-telegram-bot
source venv/bin/activate
pip list | grep telegram
# –ï—Å–ª–∏ –Ω–µ—Ç: pip install python-telegram-bot

# 2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ service —Ñ–∞–π–ª
cp telegram_bot.service /etc/systemd/system/

# 3. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ systemd
systemctl daemon-reload

# 4. –í–∫–ª—é—á–∏—Ç–µ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
systemctl enable telegram_bot

# 5. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–µ–Ω–µ–¥–∂–µ—Ä –±–æ—Ç–æ–≤
systemctl start telegram_bot

# 6. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
systemctl status telegram_bot --no-pager -l
```

## üìù –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤:

1. –í–æ–π–¥–∏—Ç–µ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: `https://d-promo.uz`
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** (–¥–ª—è –∫–∞–∂–¥–æ–π —à–∫–æ–ª—ã –æ—Ç–¥–µ–ª—å–Ω–æ)
3. –ù–∞–π–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª **Telegram –±–æ—Ç**
4. –í–≤–µ–¥–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ (–ø–æ–ª—É—á–∏—Ç–µ –æ—Ç @BotFather –≤ Telegram)
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

**–í–∞–∂–Ω–æ:** –ö–∞–∂–¥–∞—è —à–∫–æ–ª–∞ –¥–æ–ª–∂–Ω–∞ –∏–º–µ—Ç—å —Å–≤–æ–π —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –±–æ—Ç!

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞:

```bash
# –õ–æ–≥–∏ –º–µ–Ω–µ–¥–∂–µ—Ä–∞
journalctl -u telegram_bot -f

# –î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
# ü§ñ –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ –¥–ª—è —à–∫–æ–ª—ã 'A1' (ID: 1)...
# ‚úÖ –ë–æ—Ç –¥–ª—è —à–∫–æ–ª—ã 'A1' –∑–∞–ø—É—â–µ–Ω!
```

## üéØ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

- **–ú–µ–Ω–µ–¥–∂–µ—Ä –±–æ—Ç–æ–≤** –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ —à–∫–æ–ª—ã –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
- –î–ª—è –∫–∞–∂–¥–æ–π —à–∫–æ–ª—ã —Å —Ç–æ–∫–µ–Ω–æ–º –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –±–æ—Ç–∞
- –ö–∞–∂–¥—ã–π –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å —É—á–µ–Ω–∏–∫–∞–º–∏ —Å–≤–æ–µ–π —à–∫–æ–ª—ã
- –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Ç–æ–∫–µ–Ω–∞ –±–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è
- –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ç–æ–∫–µ–Ω–∞ –±–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

