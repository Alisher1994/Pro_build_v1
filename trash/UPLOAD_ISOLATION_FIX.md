# üì§ –ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π: –∏–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ —à–∫–æ–ª–∞–º

## üéØ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞:

**–û—Å—Ç–∞—Ç–æ–∫ –∫–∞—Å—Å—ã –ø–æ–∫–∞–∑—ã–≤–∞–ª –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑-–∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –∏–∑–æ–ª—è—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ —à–∫–æ–ª–∞–º!**

### –ü—Ä–æ–±–ª–µ–º–∞:
1. –í –º–æ–¥–µ–ª–∏ `Expense` –Ω–µ –±—ã–ª–æ –ø–æ–ª—è `school_id` - –≤—Å–µ —Ä–∞—Å—Ö–æ–¥—ã —É—á–∏—Ç—ã–≤–∞–ª–∏—Å—å –¥–ª—è –≤—Å–µ—Ö —à–∫–æ–ª
2. –í –º–æ–¥–µ–ª–∏ `CashTransfer` –Ω–µ –±—ã–ª–æ –ø–æ–ª—è `school_id` –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ (—Ö–æ—Ç—è –≤ –∫–æ–¥–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–æ—Å—å)
3. –†–∞—Å—Ö–æ–¥—ã –∏ –ø–µ—Ä–µ–¥–∞—á–∏ –¥—Ä—É–≥–∏—Ö —à–∫–æ–ª —É—á–∏—Ç—ã–≤–∞–ª–∏—Å—å –≤ —Ä–∞—Å—á–µ—Ç–µ –æ—Å—Ç–∞—Ç–∫–∞ –∫–∞—Å—Å—ã

### –†–µ—à–µ–Ω–∏–µ:
1. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `school_id` –≤ –º–æ–¥–µ–ª—å `Expense`
2. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `school_id` –≤ –º–æ–¥–µ–ª—å `CashTransfer`
3. ‚úÖ –°–æ–∑–¥–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `ensure_expenses_table()` –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–æ–ª–æ–Ω–∫–∏ –≤ –ë–î
4. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ –æ—Å—Ç–∞—Ç–∫–∞ - —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –¢–û–õ–¨–ö–û –∑–∞–ø–∏—Å–∏ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º `school_id`
5. ‚úÖ –ó–∞–ø–∏—Å–∏ –±–µ–∑ `school_id` (NULL) —Ç–µ–ø–µ—Ä—å –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è

## üìã –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

1. **`backend/models/models.py`** - –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `school_id` –≤ –º–æ–¥–µ–ª–∏ `Expense` –∏ `CashTransfer`
2. **`app.py`** - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `ensure_expenses_table()` –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ –æ—Å—Ç–∞—Ç–∫–∞

## üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–≥—Ä—É–∑–∫–µ:

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ WinSCP (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É —á–µ—Ä–µ–∑ WinSCP:**
   - –•–æ—Å—Ç: `45.92.173.37`
   - –ü–æ—Ä—Ç: `22`
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: `root`
   - –ü–∞—Ä–æ–ª—å: `12345678`

2. **–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª—ã:**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ `/opt/football_school/`
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª—ã:
     - `backend/models/models.py` ‚Üí `/opt/football_school/backend/models/models.py`
     - `app.py` ‚Üí `/opt/football_school/app.py`

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ PowerShell (SCP –∫–æ–º–∞–Ω–¥—ã)

```powershell
# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd C:\Users\LOQ\Desktop\App\CAM\football_school

# –ó–∞–≥—Ä—É–∑–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
scp backend/models/models.py root@45.92.173.37:/opt/football_school/backend/models/
scp app.py root@45.92.173.37:/opt/football_school/
```

## üîÑ –ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤ –Ω–∞ VPS:

### 1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É –ø–æ SSH:
```bash
ssh root@45.92.173.37
```

### 2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞:
```bash
cd /opt/football_school
```

### 3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞:
```bash
chown -R www-data:www-data /opt/football_school/backend/models/models.py
chown www-data:www-data /opt/football_school/app.py
chmod 644 /opt/football_school/backend/models/models.py
chmod 644 /opt/football_school/app.py
```

### 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å:
```bash
systemctl restart football_school
```

### 5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å:
```bash
systemctl status football_school --no-pager -l
```

### 6. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∏):
```bash
journalctl -u football_school -n 50 --no-pager
```

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã:

–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. **–°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–∞—Å—Å—ã:**
   - `https://d-promo.uz/finances` ‚Üí –≤–∫–ª–∞–¥–∫–∞ "–ö–∞—Å—Å–∞"

2. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
   - ‚úÖ –ï—Å–ª–∏ –Ω–µ—Ç –ø—Ä–∏—Ö–æ–¥–∞ –Ω–∞–ª–∏—á–Ω—ã–º–∏, –æ—Å—Ç–∞—Ç–æ–∫ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 0 (–Ω–µ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º)
   - ‚úÖ –£—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –¢–û–õ–¨–ö–û —Ä–∞—Å—Ö–æ–¥—ã –∏ –ø–µ—Ä–µ–¥–∞—á–∏ —Ç–µ–∫—É—â–µ–π —à–∫–æ–ª—ã
   - ‚úÖ –†–∞—Å—Ö–æ–¥—ã –∏ –ø–µ—Ä–µ–¥–∞—á–∏ –¥—Ä—É–≥–∏—Ö —à–∫–æ–ª –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ –æ—Å—Ç–∞—Ç–æ–∫

## üîç –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```
–û—Å—Ç–∞—Ç–æ–∫ = –ü—Ä–∏—Ö–æ–¥ - –í–°–ï —Ä–∞—Å—Ö–æ–¥—ã (–≤—Å–µ—Ö —à–∫–æ–ª) - –í–°–ï –ø–µ—Ä–µ–¥–∞—á–∏ (–≤—Å–µ—Ö —à–∫–æ–ª)
```

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```
–û—Å—Ç–∞—Ç–æ–∫ = –ü—Ä–∏—Ö–æ–¥ - –†–∞—Å—Ö–æ–¥—ã –¢–ï–ö–£–©–ï–ô —à–∫–æ–ª—ã - –ü–µ—Ä–µ–¥–∞—á–∏ –¢–ï–ö–£–©–ï–ô —à–∫–æ–ª—ã
```

### –ü—Ä–∏–º–µ—Ä:
**–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- –ü—Ä–∏—Ö–æ–¥ —à–∫–æ–ª—ã A: 0 —Å—É–º
- –†–∞—Å—Ö–æ–¥—ã —à–∫–æ–ª—ã B: 685 000 —Å—É–º (—É—á–∏—Ç—ã–≤–∞–ª–∏—Å—å!)
- –ü–µ—Ä–µ–¥–∞—á–∏ —à–∫–æ–ª—ã B: 500 000 —Å—É–º (—É—á–∏—Ç—ã–≤–∞–ª–∏—Å—å!)
- **–û—Å—Ç–∞—Ç–æ–∫ —à–∫–æ–ª—ã A: 0 - 685 000 - 500 000 = -1 185 000 —Å—É–º** ‚ùå

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- –ü—Ä–∏—Ö–æ–¥ —à–∫–æ–ª—ã A: 0 —Å—É–º
- –†–∞—Å—Ö–æ–¥—ã —à–∫–æ–ª—ã A: 0 —Å—É–º (—Ç–æ–ª—å–∫–æ —Å–≤–æ–µ–π —à–∫–æ–ª—ã)
- –ü–µ—Ä–µ–¥–∞—á–∏ —à–∫–æ–ª—ã A: 0 —Å—É–º (—Ç–æ–ª—å–∫–æ —Å–≤–æ–µ–π —à–∫–æ–ª—ã)
- **–û—Å—Ç–∞—Ç–æ–∫ —à–∫–æ–ª—ã A: 0 - 0 - 0 = 0 —Å—É–º** ‚úÖ

## üö® –í–∞–∂–Ω–æ:

–ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤ —Ñ—É–Ω–∫—Ü–∏—è `ensure_expenses_table()` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–∏—Ç –∫–æ–ª–æ–Ω–∫—É `school_id` –≤ —Ç–∞–±–ª–∏—Ü—É `expenses`, –µ—Å–ª–∏ –µ—ë –Ω–µ—Ç. –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∑–∞–ø–∏—Å–∏ –±–µ–∑ `school_id` –±—É–¥—É—Ç –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –ø—Ä–∏ —Ä–∞—Å—á–µ—Ç–µ –æ—Å—Ç–∞—Ç–∫–∞.

## üìù –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:

1. **–ú–æ–¥–µ–ª—å Expense:**
   - –î–æ–±–∞–≤–ª–µ–Ω–æ: `school_id = db.Column(db.Integer, db.ForeignKey('schools.id'), nullable=True)`

2. **–ú–æ–¥–µ–ª—å CashTransfer:**
   - –î–æ–±–∞–≤–ª–µ–Ω–æ: `school_id = db.Column(db.Integer, db.ForeignKey('schools.id'), nullable=True)`

3. **–õ–æ–≥–∏–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏:**
   - –ò–∑–º–µ–Ω–µ–Ω–æ —Å `filter_by(school_id=school_id)` –Ω–∞ `filter(Expense.school_id == school_id)`
   - –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –∑–∞–ø–∏—Å–∏ —Å `school_id = NULL` –Ω–µ —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è


