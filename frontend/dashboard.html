<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Дашборд · ProBIM</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <style>
        .dashboard-container {
            padding: 24px;
            background: var(--gray-100);
            min-height: 100vh;
            overflow-y: auto;
        }

        .dashboard-header {
            margin-bottom: 24px;
        }

        .dashboard-title {
            font-size: 28px;
            font-weight: 600;
            color: var(--gray-900);
            margin: 0 0 8px 0;
        }

        .dashboard-subtitle {
            font-size: 14px;
            color: var(--gray-600);
            margin: 0;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }

        .stat-card {
            background: white;
            border-radius: 4px;
            padding: 20px;
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--gray-200);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--primary);
            transform: scaleY(0);
            transform-origin: bottom;
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .stat-card:hover {
            box-shadow: var(--shadow-md);
            transform: translateY(-2px);
        }

        .stat-card:hover::before {
            transform: scaleY(1);
        }

        .stat-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 12px;
        }

        .stat-icon {
            width: 40px;
            height: 40px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--primary-lighter);
        }

        .stat-icon svg {
            width: 20px;
            height: 20px;
            stroke: var(--primary);
        }

        .stat-trend {
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 12px;
            font-weight: 600;
            padding: 4px 8px;
            border-radius: 4px;
        }

        .stat-trend.up {
            background: #E8F5E9;
            color: #2E7D32;
        }

        .stat-trend.down {
            background: #FFEBEE;
            color: #C62828;
        }

        .stat-value {
            font-size: 32px;
            font-weight: 700;
            color: var(--gray-900);
            margin: 0 0 4px 0;
            line-height: 1;
            animation: countUp 1.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .stat-label {
            font-size: 13px;
            color: var(--gray-600);
            margin: 0;
        }

        @keyframes countUp {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 24px;
            margin-bottom: 24px;
        }

        .chart-card {
            background: white;
            border-radius: 4px;
            padding: 24px;
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--gray-200);
            animation: fadeInUp 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .chart-card.large {
            grid-column: 1 / -1;
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .chart-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--gray-900);
            margin: 0;
        }

        .chart-subtitle {
            font-size: 12px;
            color: var(--gray-500);
            margin: 4px 0 0 0;
        }

        .chart-actions {
            display: flex;
            gap: 8px;
        }

        .chart-filter {
            padding: 6px 12px;
            border: 1px solid var(--gray-300);
            border-radius: 4px;
            background: white;
            font-size: 12px;
            color: var(--gray-700);
            cursor: pointer;
            transition: all 0.2s;
        }

        .chart-filter:hover {
            background: var(--gray-50);
            border-color: var(--gray-400);
        }

        .chart-filter.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .chart-container {
            position: relative;
            height: 300px;
        }

        .chart-container.small {
            height: 250px;
        }

        .chart-container.large {
            height: 400px;
        }

        .progress-list {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .progress-item {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .progress-name {
            font-size: 13px;
            font-weight: 500;
            color: var(--gray-800);
        }

        .progress-value {
            font-size: 13px;
            font-weight: 600;
            color: var(--primary);
        }

        .progress-bar-container {
            height: 8px;
            background: var(--gray-200);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--primary) 0%, var(--primary-light) 100%);
            border-radius: 4px;
            transition: width 1.5s cubic-bezier(0.4, 0, 0.2, 1);
            animation: progressSlide 1.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes progressSlide {
            from {
                width: 0 !important;
            }
        }

        .team-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 12px;
        }

        .team-member {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: var(--gray-50);
            border-radius: 4px;
            transition: all 0.2s;
        }

        .team-member:hover {
            background: var(--gray-100);
        }

        .team-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 14px;
        }

        .team-info {
            flex: 1;
        }

        .team-name {
            font-size: 13px;
            font-weight: 500;
            color: var(--gray-900);
            margin: 0 0 2px 0;
        }

        .team-role {
            font-size: 11px;
            color: var(--gray-600);
            margin: 0;
        }
    </style>
</head>

<body>
    <div class="dashboard-container">
        <div class="dashboard-header">
            <h1 class="dashboard-title">Дашборд проекта</h1>
            <p class="dashboard-subtitle">Обзор ключевых показателей и аналитика</p>
        </div>

        <!-- Stats Cards -->
        <div class="stats-grid">
            <div class="stat-card" style="animation-delay: 0.1s;">
                <div class="stat-header">
                    <div class="stat-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path
                                d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z" />
                        </svg>
                    </div>
                    <div class="stat-trend up">
                        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="3">
                            <polyline points="18 15 12 9 6 15"></polyline>
                        </svg>
                        +12%
                    </div>
                </div>
                <h2 class="stat-value">24</h2>
                <p class="stat-label">Активных блоков</p>
            </div>

            <div class="stat-card" style="animation-delay: 0.2s;">
                <div class="stat-header">
                    <div class="stat-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 12V7H5a2 2 0 0 1 0-4h14v4" />
                            <path d="M3 5v14a2 2 0 0 0 2 2h16v-5" />
                            <path d="M18 12a2 2 0 0 0 0 4h4v-4Z" />
                        </svg>
                    </div>
                    <div class="stat-trend up">
                        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="3">
                            <polyline points="18 15 12 9 6 15"></polyline>
                        </svg>
                        +8%
                    </div>
                </div>
                <h2 class="stat-value">₸ 2.4M</h2>
                <p class="stat-label">Общий бюджет</p>
            </div>

            <div class="stat-card" style="animation-delay: 0.3s;">
                <div class="stat-header">
                    <div class="stat-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M17 21v-2a4 4 0 0 0-4-4H7a4 4 0 0 0-4 4v2" />
                            <circle cx="9" cy="7" r="4" />
                            <path d="M23 21v-2a4 4 0 0 0-3-3.87" />
                            <path d="M16 3.13a4 4 0 0 1 0 7.75" />
                        </svg>
                    </div>
                    <div class="stat-trend up">
                        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="3">
                            <polyline points="18 15 12 9 6 15"></polyline>
                        </svg>
                        +3
                    </div>
                </div>
                <h2 class="stat-value">18</h2>
                <p class="stat-label">Субподрядчиков</p>
            </div>

            <div class="stat-card" style="animation-delay: 0.4s;">
                <div class="stat-header">
                    <div class="stat-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10" />
                            <polyline points="12 6 12 12 16 14" />
                        </svg>
                    </div>
                    <div class="stat-trend down">
                        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="3">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                        -2 дня
                    </div>
                </div>
                <h2 class="stat-value">45</h2>
                <p class="stat-label">Дней до дедлайна</p>
            </div>
        </div>

        <!-- Charts Grid -->
        <div class="charts-grid">
            <!-- Budget Chart -->
            <div class="chart-card" style="animation-delay: 0.5s;">
                <div class="chart-header">
                    <div>
                        <h3 class="chart-title">Распределение бюджета</h3>
                        <p class="chart-subtitle">По разделам работ</p>
                    </div>
                </div>
                <div class="chart-container small">
                    <canvas id="budgetChart"></canvas>
                </div>
            </div>

            <!-- Timeline Chart -->
            <div class="chart-card" style="animation-delay: 0.6s;">
                <div class="chart-header">
                    <div>
                        <h3 class="chart-title">Прогресс по месяцам</h3>
                        <p class="chart-subtitle">Выполнение работ</p>
                    </div>
                </div>
                <div class="chart-container small">
                    <canvas id="timelineChart"></canvas>
                </div>
            </div>

            <!-- Progress Bars -->
            <div class="chart-card" style="animation-delay: 0.7s;">
                <div class="chart-header">
                    <div>
                        <h3 class="chart-title">Прогресс по блокам</h3>
                        <p class="chart-subtitle">Процент выполнения</p>
                    </div>
                </div>
                <div class="progress-list">
                    <div class="progress-item">
                        <div class="progress-header">
                            <span class="progress-name">Блок А - Фундамент</span>
                            <span class="progress-value">85%</span>
                        </div>
                        <div class="progress-bar-container">
                            <div class="progress-bar" style="width: 85%;"></div>
                        </div>
                    </div>
                    <div class="progress-item">
                        <div class="progress-header">
                            <span class="progress-name">Блок Б - Каркас</span>
                            <span class="progress-value">62%</span>
                        </div>
                        <div class="progress-bar-container">
                            <div class="progress-bar" style="width: 62%;"></div>
                        </div>
                    </div>
                    <div class="progress-item">
                        <div class="progress-header">
                            <span class="progress-name">Блок В - Кровля</span>
                            <span class="progress-value">38%</span>
                        </div>
                        <div class="progress-bar-container">
                            <div class="progress-bar" style="width: 38%;"></div>
                        </div>
                    </div>
                    <div class="progress-item">
                        <div class="progress-header">
                            <span class="progress-name">Блок Г - Отделка</span>
                            <span class="progress-value">15%</span>
                        </div>
                        <div class="progress-bar-container">
                            <div class="progress-bar" style="width: 15%;"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Team Performance -->
            <div class="chart-card" style="animation-delay: 0.8s;">
                <div class="chart-header">
                    <div>
                        <h3 class="chart-title">Команда проекта</h3>
                        <p class="chart-subtitle">Активные участники</p>
                    </div>
                </div>
                <div class="team-grid">
                    <div class="team-member">
                        <div class="team-avatar">АС</div>
                        <div class="team-info">
                            <p class="team-name">Алишер Садыков</p>
                            <p class="team-role">ГИП</p>
                        </div>
                    </div>
                    <div class="team-member">
                        <div class="team-avatar">ИП</div>
                        <div class="team-info">
                            <p class="team-name">Иван Петров</p>
                            <p class="team-role">Прораб</p>
                        </div>
                    </div>
                    <div class="team-member">
                        <div class="team-avatar">МК</div>
                        <div class="team-info">
                            <p class="team-name">Мария Козлова</p>
                            <p class="team-role">Сметчик</p>
                        </div>
                    </div>
                    <div class="team-member">
                        <div class="team-avatar">ДС</div>
                        <div class="team-info">
                            <p class="team-name">Дмитрий Смирнов</p>
                            <p class="team-role">Инженер</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Large Chart - Cost Analysis -->
            <div class="chart-card large" style="animation-delay: 0.9s;">
                <div class="chart-header">
                    <div>
                        <h3 class="chart-title">Анализ затрат</h3>
                        <p class="chart-subtitle">План vs Факт по месяцам</p>
                    </div>
                    <div class="chart-actions">
                        <button class="chart-filter active">6 месяцев</button>
                        <button class="chart-filter">12 месяцев</button>
                        <button class="chart-filter">Весь период</button>
                    </div>
                </div>
                <div class="chart-container large">
                    <canvas id="costAnalysisChart"></canvas>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Chart.js configuration
        Chart.defaults.font.family = "'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif";
        Chart.defaults.color = '#605E5C';
        Chart.defaults.borderColor = '#E1DFDD';

        const primaryColor = '#207345';
        const primaryLight = '#5a9d79';
        const accentBlue = '#207345';
        const accentOrange = '#CA5010';
        const accentGreen = '#107C10';

        // Budget Doughnut Chart
        const budgetCtx = document.getElementById('budgetChart').getContext('2d');
        new Chart(budgetCtx, {
            type: 'doughnut',
            data: {
                labels: ['АР', 'КЖ', 'ОВ', 'ВК', 'ЭОМ', 'Прочее'],
                datasets: [{
                    data: [850000, 620000, 380000, 290000, 180000, 80000],
                    backgroundColor: [
                        primaryColor,
                        primaryLight,
                        '#9ccc65',
                        '#66bb6a',
                        '#43a047',
                        '#2e7d32'
                    ],
                    borderWidth: 0,
                    borderRadius: 4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'right',
                        labels: {
                            padding: 12,
                            usePointStyle: true,
                            pointStyle: 'circle'
                        }
                    },
                    tooltip: {
                        callbacks: {
                            label: function (context) {
                                return context.label + ': ₸ ' + context.parsed.toLocaleString('ru-RU');
                            }
                        }
                    }
                },
                animation: {
                    animateRotate: true,
                    animateScale: true,
                    duration: 1500,
                    easing: 'easeInOutQuart'
                }
            }
        });

        // Timeline Bar Chart
        const timelineCtx = document.getElementById('timelineChart').getContext('2d');
        new Chart(timelineCtx, {
            type: 'bar',
            data: {
                labels: ['Янв', 'Фев', 'Мар', 'Апр', 'Май', 'Июн'],
                datasets: [{
                    label: 'Выполнено работ, %',
                    data: [12, 28, 45, 62, 78, 85],
                    backgroundColor: primaryColor,
                    borderRadius: 4,
                    borderSkipped: false
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 100,
                        ticks: {
                            callback: function (value) {
                                return value + '%';
                            }
                        },
                        grid: {
                            drawBorder: false
                        }
                    },
                    x: {
                        grid: {
                            display: false
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        callbacks: {
                            label: function (context) {
                                return 'Прогресс: ' + context.parsed.y + '%';
                            }
                        }
                    }
                },
                animation: {
                    duration: 1500,
                    easing: 'easeInOutQuart',
                    delay: (context) => {
                        return context.dataIndex * 100;
                    }
                }
            }
        });

        // Cost Analysis Line Chart
        const costCtx = document.getElementById('costAnalysisChart').getContext('2d');
        new Chart(costCtx, {
            type: 'line',
            data: {
                labels: ['Янв', 'Фев', 'Мар', 'Апр', 'Май', 'Июн'],
                datasets: [{
                    label: 'План',
                    data: [400000, 800000, 1200000, 1600000, 2000000, 2400000],
                    borderColor: primaryColor,
                    backgroundColor: 'rgba(32, 115, 69, 0.1)',
                    borderWidth: 3,
                    fill: true,
                    tension: 0.4,
                    pointRadius: 5,
                    pointHoverRadius: 7,
                    pointBackgroundColor: 'white',
                    pointBorderColor: primaryColor,
                    pointBorderWidth: 2
                }, {
                    label: 'Факт',
                    data: [380000, 820000, 1150000, 1680000, 1950000, 2350000],
                    borderColor: accentOrange,
                    backgroundColor: 'rgba(202, 80, 16, 0.1)',
                    borderWidth: 3,
                    fill: true,
                    tension: 0.4,
                    pointRadius: 5,
                    pointHoverRadius: 7,
                    pointBackgroundColor: 'white',
                    pointBorderColor: accentOrange,
                    pointBorderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                interaction: {
                    mode: 'index',
                    intersect: false
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: {
                            callback: function (value) {
                                return '₸ ' + (value / 1000000).toFixed(1) + 'M';
                            }
                        },
                        grid: {
                            drawBorder: false
                        }
                    },
                    x: {
                        grid: {
                            display: false
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: true,
                        position: 'top',
                        align: 'end',
                        labels: {
                            usePointStyle: true,
                            padding: 16
                        }
                    },
                    tooltip: {
                        callbacks: {
                            label: function (context) {
                                return context.dataset.label + ': ₸ ' + context.parsed.y.toLocaleString('ru-RU');
                            }
                        }
                    }
                },
                animation: {
                    duration: 2000,
                    easing: 'easeInOutQuart'
                }
            }
        });

        // Chart filter buttons
        document.querySelectorAll('.chart-filter').forEach(btn => {
            btn.addEventListener('click', function () {
                document.querySelectorAll('.chart-filter').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
            });
        });
    </script>
</body>

</html>