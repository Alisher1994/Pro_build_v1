# Система нормативов производительности

## Описание

Система позволяет автоматически рассчитывать нормативы производительности (выработку за рабочий день) для видов работ с помощью ИИ, и сохранять их для дальнейшего использования в расчете длительности задач в графике работ.

## Как это работает

1. **Хранение нормативов:**
   - Нормативы сохраняются в поле `description` вида работ в формате: `productionRate:12.5`
   - Дополнительно кэшируются в localStorage браузера

2. **Расчет нормативов:**
   - При создании задачи в графике система проверяет наличие норматива
   - Если норматива нет, можно запросить его расчет через ИИ
   - ИИ анализирует тип работ и предлагает реалистичный норматив

3. **Использование нормативов:**
   - Длительность задачи = Объем работ / Норматив
   - Например: 100 м² кладки / 10 м²/день = 10 дней

## API Endpoints

### POST /api/norms/calculate

Рассчитывает норматив для вида работ с помощью ИИ.

**Запрос:**
```json
{
  "workTypeName": "Кладка кирпича",
  "unit": "м²"
}
```

**Ответ:**
```json
{
  "productionRate": 10.5,
  "unit": "м²",
  "workTypeName": "Кладка кирпича",
  "generated": true
}
```

## Рекомендуемые модели

Для лучшего качества расчетов рекомендуется использовать:

1. **llama3.2:3b** - баланс скорости и качества (установлена по умолчанию)
2. **mistral:7b** - лучшее качество, но медленнее
3. **llama3.2:1b** - очень быстрая, но менее точная

Для установки модели:
```bash
ollama pull llama3.2:3b
# или
ollama pull mistral:7b
```

## Использование в коде

### Frontend

```javascript
// Рассчитать норматив
const productionRate = await NormsManager.calculateNorm('Кладка кирпича', 'м²');

// Сохранить норматив для вида работ
await NormsManager.saveNormToWorkType(workTypeId, productionRate);
```

### Backend

Нормативы автоматически используются при расчете длительности задач в `gantt.ts`.

## Типичные нормативы (справочно)

- Кладка кирпича: 8-12 м²/день
- Бетонные работы: 5-8 м³/день
- Штукатурка: 15-25 м²/день
- Покраска: 20-30 м²/день
- Земляные работы: 30-50 м³/день
- Арматурные работы: 6-10 т/день



