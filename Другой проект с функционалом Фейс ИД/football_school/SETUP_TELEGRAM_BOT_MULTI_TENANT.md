# ü§ñ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram –±–æ—Ç–æ–≤ –¥–ª—è Multi-Tenancy —Å–∏—Å—Ç–µ–º—ã

## üìã –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

–ö–∞–∂–¥–∞—è —à–∫–æ–ª–∞ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å —Å–≤–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π Telegram –±–æ—Ç:
1. –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –∫–∞–∂–¥–æ–π —à–∫–æ–ª—ã –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
2. –ú–µ–Ω–µ–¥–∂–µ—Ä –±–æ—Ç–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –¥–ª—è –∫–∞–∂–¥–æ–π —à–∫–æ–ª—ã —Å –∞–∫—Ç–∏–≤–Ω—ã–º —Ç–æ–∫–µ–Ω–æ–º
3. –ö–∞–∂–¥—ã–π –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å —É—á–µ–Ω–∏–∫–∞–º–∏ —Å–≤–æ–µ–π —à–∫–æ–ª—ã

## üìã –®–∞–≥ 1: –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –±–æ—Ç–æ–≤

–î–ª—è –∫–∞–∂–¥–æ–π —à–∫–æ–ª—ã –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –±–æ—Ç–∞:

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram
2. –ù–∞–π–¥–∏—Ç–µ @BotFather
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/newbot`
4. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –∏ –ø–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω –¥–ª—è —à–∫–æ–ª—ã

**–í–∞–∂–Ω–æ:** –ö–∞–∂–¥–∞—è —à–∫–æ–ª–∞ –¥–æ–ª–∂–Ω–∞ –∏–º–µ—Ç—å —Å–≤–æ–π —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –±–æ—Ç!

## üìã –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

1. –í–æ–π–¥–∏—Ç–µ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: `https://d-promo.uz`
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **–ù–∞—Å—Ç—Ä–æ–π–∫–∏**
3. –ù–∞–π–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª **Telegram –±–æ—Ç**
4. –í–≤–µ–¥–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –¥–ª—è —Ç–µ–∫—É—â–µ–π —à–∫–æ–ª—ã
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –¥–ª—è –∫–∞–∂–¥–æ–π —à–∫–æ–ª—ã.

## üìã –®–∞–≥ 3: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### 1. –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä:

–ß–µ—Ä–µ–∑ WinSCP –∑–∞–≥—Ä—É–∑–∏—Ç–µ:
- `telegram_bot_manager.py` ‚Üí `/opt/football_school/telegram_bot_manager.py`
- `telegram_bot.service` ‚Üí `/opt/football_school/telegram_bot.service`

### 2. –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
cd /opt/football_school

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–∏ python-telegram-bot
source venv/bin/activate
pip list | grep telegram

# –ï—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω:
pip install python-telegram-bot

# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ service —Ñ–∞–π–ª
cp telegram_bot.service /etc/systemd/system/

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ systemd
systemctl daemon-reload

# –í–∫–ª—é—á–∏—Ç–µ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
systemctl enable telegram_bot

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–µ–Ω–µ–¥–∂–µ—Ä –±–æ—Ç–æ–≤
systemctl start telegram_bot

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
systemctl status telegram_bot --no-pager -l
```

## üìã –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:

```bash
# –ü–æ—Å–ª–µ–¥–Ω–∏–µ –ª–æ–≥–∏
journalctl -u telegram_bot -n 50 --no-pager

# –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
journalctl -u telegram_bot -f
```

–î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è —Ç–∏–ø–∞:
```
ü§ñ –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ –¥–ª—è —à–∫–æ–ª—ã 'A1' (ID: 1)...
‚úÖ –ë–æ—Ç –¥–ª—è —à–∫–æ–ª—ã 'A1' –∑–∞–ø—É—â–µ–Ω!
```

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É –±–æ—Ç–æ–≤:

1. –ù–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞ –ø–µ—Ä–≤–æ–π —à–∫–æ–ª—ã –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
3. –ë–æ—Ç –¥–æ–ª–∂–µ–Ω –æ—Ç–≤–µ—Ç–∏—Ç—å —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º —à–∫–æ–ª—ã
4. –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –¥–ª—è –¥—Ä—É–≥–∏—Ö —à–∫–æ–ª

## üîß –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–ú–µ–Ω–µ–¥–∂–µ—Ä –±–æ—Ç–æ–≤** (`telegram_bot_manager.py`):
   - –ö–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ —à–∫–æ–ª—ã
   - –î–ª—è –∫–∞–∂–¥–æ–π —à–∫–æ–ª—ã —Å —Ç–æ–∫–µ–Ω–æ–º –∑–∞–ø—É—Å–∫–∞–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –±–æ—Ç–∞
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç —É–ø–∞–≤—à–∏–µ –±–æ—Ç—ã
   - –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –±–æ—Ç—ã, –µ—Å–ª–∏ —Ç–æ–∫–µ–Ω —É–¥–∞–ª—ë–Ω –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫

2. **–ö–∞–∂–¥—ã–π –±–æ—Ç**:
   - –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å —Ç–æ–∫–µ–Ω–æ–º —Å–≤–æ–µ–π —à–∫–æ–ª—ã
   - –ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —É—á–µ–Ω–∏–∫–∞ –ø–µ—Ä–µ–¥–∞—ë—Ç `school_id` –≤ API
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ —É—á–µ–Ω–∏–∫–∞–º —Å–≤–æ–µ–π —à–∫–æ–ª—ã

## üìù –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –±–æ—Ç–æ–≤
systemctl restart telegram_bot

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
systemctl stop telegram_bot

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
journalctl -u telegram_bot -f

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
systemctl status telegram_bot
```

## ‚ö†Ô∏è –í–∞–∂–Ω–æ:

- –ö–∞–∂–¥–∞—è —à–∫–æ–ª–∞ –¥–æ–ª–∂–Ω–∞ –∏–º–µ—Ç—å —Å–≤–æ–π —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –±–æ—Ç –æ—Ç @BotFather
- –¢–æ–∫–µ–Ω—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –∫–∞–∂–¥–æ–π —à–∫–æ–ª—ã –æ—Ç–¥–µ–ª—å–Ω–æ
- –ú–µ–Ω–µ–¥–∂–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Å–µ–º–∏ –±–æ—Ç–∞–º–∏
- –ï—Å–ª–∏ —Ç–æ–∫–µ–Ω —É–¥–∞–ª—ë–Ω –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫, –±–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è

